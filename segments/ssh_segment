#!/usr/bin/env bash

# ssh_segment

# -----------------------------------------------------------------------------
# append to prompt: indicate if SSH session
# arg: $1 foreground color
# arg: $2 background color
# option variables;
#   PL_SSH_USE_IP: true/false to show IP instead of hostname
function ssh_segment {
    if [[ -n ${SSH_CLIENT} || -n ${SSH_TTY} ]]; then
        local bg_color="$1"
        local fg_color="$2"
        local content
        if ${PL_SSH_USE_IP} ; then
            local ip
            ip_address ip
            content+="${ip}"
        else
            content+="\h"
        fi
        add_segment "${content}" "${fg_color}" "${bg_color}"
    fi
}

